:root{
  --bg:#f5f6f8;
  --card:#ffffff;
  --ink:#1b1f2a;
  --muted:#6b7280;
  --accent:#7b1231;
  --accent-2:#b65a73;
  --line:#e6e8ee;
  --soft:#f7f1f3;
  --danger:#b91c1c;
  --ok:#15803d;
  --warn:#8a4b00;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:var(--bg);
}

.topbar{
  background:var(--accent);
  color:#fff;
  padding:14px 16px;
  gap:12px;
}

/* ===== HEADER LAYOUT (Stoichiometry-style) ===== */
.topbar-grid{
  display:grid;
  grid-template-columns: 1fr auto 1fr; /* left spacer | centered title/tabs | right actions */
  align-items:center;
}

.topbar-left{min-width:10px;} /* spacer keeps center truly centered */

.topbar-center{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:16px;
  flex-wrap:wrap; /* wraps nicely on smaller screens */
}

.topbar-actions{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:10px;
  flex-wrap:wrap;
}

.brand{display:flex; gap:12px; align-items:center}
.brand-dot{
  width:18px;height:18px;border-radius:4px;background:#f5c12b;
}
.brand-title{font-weight:800;font-size:20px;line-height:1.1}
.brand-sub{font-size:12px;opacity:.9;margin-top:2px}

/* Centered brand text like Stoichiometry Coach */
.brand-center{
  text-align:center;
}
.brand-center .brand{
  justify-content:center;
}
.brand-center .brand-title,
.brand-center .brand-sub{
  text-align:center;
}

/* Pills (tabs) â€” kept in the header near title */
.tabs{display:flex; gap:10px; align-items:center}
.tab{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  text-decoration:none;
  border:1px solid rgba(255,255,255,.35);
  background:transparent;
  color:#fff;
  border-radius:999px;
  padding:8px 12px;
  font-weight:900;
  font-size:13px;
  cursor:pointer;
  white-space:nowrap;
}
.tab:hover{background:rgba(255,255,255,.10)}
.tab-active{
  background:#f5c12b;
  color:#3b0a17;
  border-color:transparent;
}

.wrap{
  max-width:1020px;
  margin:18px auto 36px;
  padding:0 14px;
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:16px;
  box-shadow:0 2px 10px rgba(16,24,40,.04);
  margin-bottom:14px;
}

.molecule-card{padding:14px 16px}
.molecule-label{font-size:11px;letter-spacing:.12em;color:var(--muted);font-weight:800}
.molecule-name{font-size:26px;font-weight:900;margin-top:4px}
.molecule-hint{color:var(--muted);margin-top:2px;font-size:13px}

.card-title{font-size:16px;font-weight:900;margin-bottom:4px}
.card-sub{color:var(--muted);font-size:13px}

.grid-2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
  margin-top:12px;
}
.grid-2.wide-left{
  grid-template-columns: 1.35fr .65fr;
}
@media (max-width:900px){
  .grid-2, .grid-2.wide-left{grid-template-columns:1fr}
}

.panel{
  border:1px solid var(--line);
  border-radius:12px;
  padding:12px;
  background:#fff;
}

.panel-title{font-weight:900;margin-bottom:10px}

.label{display:block;font-size:12px;font-weight:800;color:#374151;margin-bottom:6px}
.input,.select{
  width:100%;
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px 10px;
  font-size:14px;
  outline:none;
}
.input:focus,.select:focus{border-color:var(--accent-2); box-shadow:0 0 0 3px rgba(182,90,115,.12)}

.row{display:flex; gap:10px; align-items:center}
.row.between{justify-content:space-between}
@media (max-width:700px){
  .row.between{flex-direction:column; align-items:flex-start}
}

.btn{
  border:1px solid transparent;
  border-radius:999px;
  padding:9px 12px;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  white-space:nowrap;
}
.btn:disabled{opacity:.45; cursor:not-allowed}
.btn-primary{background:var(--accent); color:#fff}
.btn-primary:hover{filter:brightness(1.03)}
.btn-light{
  background:#fff;
  border-color:var(--line);
  color:#111827;
}
.btn-light:hover{background:#fafafa}

.msg{
  border-radius:10px;
  padding:10px 10px;
  font-size:13px;
  margin-top:10px;
  border:1px solid transparent;
}
.msg-soft{background:#f8fafc; border-color:#e5e7eb; color:#374151}
.msg-warn{background:#fff4da; border-color:#ffd89a; color:#7a4300}
.msg-ok{background:#ecfdf3; border-color:#bbf7d0; color:var(--ok)}
.msg-bad{background:#fef2f2; border-color:#fecaca; color:var(--danger)}

.divider{height:1px; background:var(--line); margin:12px 0}

.bank .bank-top{display:flex; justify-content:space-between; gap:12px; align-items:flex-start}
.bank-title{font-weight:900}
.bank-sub{color:var(--muted); font-size:12px}
.bank-badges{display:flex; gap:10px}
.badge{
  border:1px solid var(--line);
  border-radius:12px;
  padding:8px 10px;
  min-width:84px;
  text-align:center;
}
.badge-label{font-size:11px;color:var(--muted);font-weight:800}
.badge-num{font-size:16px;font-weight:900;margin-top:2px}

.rules{margin:10px 0 0 18px; color:#374151}
.rules li{margin:6px 0}

.stage{
  position:relative;
  height:320px;
  border-radius:12px;
  border:2px dashed rgba(182,90,115,.35);
  background:var(--soft);
  overflow:hidden;
}

.stage-overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  padding:10px;
  color:#4b5563;
  font-weight:700;
  font-size:13px;
  pointer-events:none;
}

.atom{
  position:absolute;
  width:54px;
  height:54px;
  border-radius:12px;
  border:2px solid rgba(182,90,115,.55);
  background:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  z-index:2;
}

.drop-lp{
  position:absolute;
  width:22px;
  height:18px;
  border-radius:6px;
  border:2px dashed rgba(182,90,115,.35);
  background:rgba(255,255,255,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10px;
  font-weight:900;
  color:rgba(123,18,49,.55);
  z-index:1;
}
.drop-lp.filled{
  border-style:solid;
  color:#111827;
  background:#fff;
}
.drop-lp .lpMark{font-size:12px; line-height:1}

.drop-bond{
  position:absolute;
  width:98px;
  height:44px;
  border-radius:12px;
  border:2px dashed rgba(182,90,115,.35);
  background:rgba(255,255,255,.8);
  display:flex;
  align-items:center;
  justify-content:center;
  color:rgba(123,18,49,.6);
  font-weight:900;
  font-size:12px;
  z-index:1;
}
.drop-bond.filled{
  border-style:solid;
  background:#fff;
  color:#111827;
}

.bondSvg{
  width:100%;
  height:100%;
}

.toolbox{display:flex; flex-direction:column; gap:10px}
.tool{
  display:flex;
  gap:10px;
  align-items:center;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  background:#fff;
  cursor:grab;
  user-select:none;
}
.tool:active{cursor:grabbing}
.tool-icon{
  width:44px;height:34px;
  border:1px solid var(--line);
  border-radius:10px;
  display:flex;align-items:center;justify-content:center;
  background:#fff;
}
.tool-name{font-weight:900}
.tool-cost{font-size:12px;color:var(--muted)}

.bond{
  display:block;
  width:22px;
  height:3px;
  background:#111827;
  border-radius:3px;
  position:relative;
}
.bond2::before,.bond3::before,.bond3::after{
  content:"";
  position:absolute;left:0;right:0;
  height:3px;background:#111827;border-radius:3px;
}
.bond2::before{top:-6px}
.bond3::before{top:-6px}
.bond3::after{top:6px}

.lp{font-weight:900}
