:root{
  --maroon:#8C1D40;
  --gold:#FFC627;
  --bg:#f6f6f8;
  --card:#ffffff;
  --ink:#1b1b1f;
  --muted:#60636a;
  --border:rgba(0,0,0,.10);
  --shadow:0 10px 24px rgba(0,0,0,.08);
  --radius:16px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--ink);
  background:var(--bg);
}

.topbar{
  background: linear-gradient(135deg, #7b1738, #a11d45);
  color:#fff;
  padding:18px 0 0;
}
.topbarInner{
  width:min(1100px, calc(100% - 32px));
  margin:0 auto;
  display:flex;
  gap:14px;
  align-items:center;
  justify-content:space-between;
}
.brandMark{
  width:44px;height:44px;
  border-radius:12px;
  background:var(--gold);
  flex:0 0 auto;
}
.brandText h1{
  margin:0;
  font-size:22px;
  line-height:1.1;
}
.brandText p{
  margin:4px 0 0;
  opacity:.9;
  font-size:13px;
}
.topbarActions{display:flex; gap:10px}
.accentLine{
  height:4px;
  background:var(--gold);
  margin-top:14px;
}

.wrap{
  width:min(1100px, calc(100% - 32px));
  margin:18px auto 28px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:16px;
}

.cardHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
}
.kicker{
  font-size:12px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:var(--muted);
  font-weight:800;
}
.molName{
  font-size:24px;
  font-weight:1000;
  margin-top:2px;
}
.pillRow{display:flex; gap:8px; flex-wrap:wrap}
.pill{
  border:1px solid rgba(255,255,255,.35);
  background: rgba(255,255,255,.10);
  color:#fff;
  padding:6px 10px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
}

.stepTitle{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
}
.stepTitle h2{
  margin:0;
  font-size:18px;
}
.stepTitle p{margin:4px 0 0}
.stepActions{display:flex; gap:10px; flex-wrap:wrap}

.grid2{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:12px;
}
.grid2.wide{
  grid-template-columns: 1.3fr .7fr;
}
@media (max-width: 900px){
  .grid2, .grid2.wide{grid-template-columns:1fr}
  .topbarInner{flex-direction:column; align-items:flex-start}
  .topbarActions{width:100%}
}

.panel{
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  background: #fff;
}
.panelTitle{
  font-weight:1000;
  margin-bottom:8px;
}
.label{
  display:block;
  font-weight:900;
  margin:0 0 6px;
}
.row{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.input, .select{
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px 12px;
  font-size:14px;
  min-width: 220px;
  outline:none;
}
.input:focus, .select:focus{
  border-color: rgba(140,29,64,.45);
  box-shadow:0 0 0 4px rgba(140,29,64,.10);
}

.btn{
  border:none;
  background:var(--maroon);
  color:#fff;
  border-radius:999px;
  padding:10px 14px;
  font-weight:900;
  cursor:pointer;
}
.btn.secondary{
  background:#fff;
  color:var(--ink);
  border:1px solid var(--border);
}
.btn:disabled{
  opacity:.5;
  cursor:not-allowed;
}

.notice{
  margin-top:10px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:#fafafa;
}
.notice.warn{
  border-color: rgba(255,198,39,.55);
  background: rgba(255,198,39,.12);
}
.notice.tip{
  border-style:dashed;
  border-color: rgba(140,29,64,.25);
  background: rgba(140,29,64,.04);
}
.muted{color:var(--muted)}
.small{font-size:12px}
.divider{
  height:1px;
  background:rgba(0,0,0,.08);
  margin:12px 0;
}

.bankPanel{position:relative}
.bankHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  margin-bottom:8px;
}
.bankTitle{
  font-weight:1000;
  font-size:16px;
}
.bankNums{
  display:flex;
  gap:10px;
}
.bankNum{
  border:1px solid var(--border);
  background:#fff;
  border-radius:12px;
  padding:8px 10px;
  min-width: 92px;
  text-align:right;
}
.bankNumLabel{
  font-size:11px;
  color:var(--muted);
  font-weight:900;
}
.bankNumValue{
  font-size:18px;
  font-weight:1000;
}
.bankNumValue.remain{color:var(--maroon)}

.toolbox{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.tool{
  display:flex;
  gap:12px;
  align-items:center;
  padding:10px;
  border:1px solid var(--border);
  border-radius:14px;
  background:#fff;
  cursor:grab;
}
.tool:active{cursor:grabbing}
.toolIcon{
  width:44px;height:44px;
  border-radius:12px;
  border:1px solid var(--border);
  display:grid;
  place-items:center;
  font-size:22px;
  font-weight:1000;
}
.toolName{font-weight:1000}
.toolSub{color:var(--muted); font-size:12px; font-weight:800}

.modelWrap{
  position:relative;
  height:360px;
  border:1px dashed rgba(140,29,64,.30);
  border-radius:14px;
  background: rgba(140,29,64,.02);
  overflow:hidden;
}
.bondSvg{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.modelArea{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  padding:16px;
}

.structure{
  position:relative;
  width:min(620px, 100%);
  height:300px;
}

.atom{
  position:absolute;
  width:56px;height:56px;
  border-radius:16px;
  background:#fff;
  border:2px solid rgba(140,29,64,.25);
  display:grid;
  place-items:center;
  font-weight:1000;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
}

.slot{
  position:absolute;
  width:42px;height:30px;
  border-radius:12px;
  border:1.5px dashed rgba(140,29,64,.35);
  background: rgba(255,255,255,.65);
  display:grid;
  place-items:center;
  font-size:16px;
  font-weight:1000;
  color: rgba(140,29,64,.85);
}
.slot.filled{
  border-style:solid;
  background: rgba(140,29,64,.06);
}
.slot .hint{
  font-size:10px;
  color: rgba(0,0,0,.50);
  font-weight:1000;
  letter-spacing:.08em;
}

.bondZone{
  position:absolute;
  width:84px;
  height:44px;
  border-radius:14px;
  border:2px dashed rgba(140,29,64,.35);
  background: rgba(140,29,64,.06);
  display:grid;
  place-items:center;
  font-weight:1000;
  color: var(--maroon);
}
.bondZone.filled{
  border-style:solid;
  background: rgba(255,255,255,.9);
}
.bondZone .hint{
  font-size:13px;
  font-weight:1000;
  color: rgba(0,0,0,.55);
  text-align:center;
  line-height:1.05;
}
.bondZone .label{
  font-size:26px;
  font-weight:1000;
  margin:0;
  padding:0;
}
.bondZone.vertical .label,
.bondZone.vertical .hint{
  transform: rotate(90deg);
  display:inline-block;
}

.feedback{
  margin-top:12px;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#fafafa;
}
.feedback.good{
  border-color: rgba(40,150,60,.35);
  background: rgba(40,150,60,.10);
  color:#134b22;
}
.feedback.bad{
  border-color: rgba(200,60,60,.35);
  background: rgba(200,60,60,.10);
  color:#5a1414;
}

.bullets{margin:8px 0 0 18px; padding:0}
.bullets li{margin:4px 0}

.footer{
  text-align:center;
  padding:8px 0;
}
