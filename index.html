<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Covalent Bonding Coach</title>
  <link rel="stylesheet" href="lewis.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-mark" aria-hidden="true"></div>
      <div class="brand-text">
        <h1>Covalent Bonding Coach</h1>
        <p>Count valence electrons → choose/lock central atom → build the Lewis model.</p>
      </div>
    </div>

    <div class="topbar-actions">
      <button class="btn btn-secondary" id="btnNewMolTop" type="button">New molecule</button>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="eyebrow">MOLECULE</div>
      <div class="mol-title" id="molTitle">—</div>
      <div class="muted" id="molPrompt">Loading…</div>
    </section>

    <section class="card">
      <h2>Step 1: Count electrons + choose the central atom</h2>
      <div class="muted small">
        Confirm the <b>total valence electrons</b>. Then choose a central atom (or “No central atom” for diatomic molecules) and lock it.
      </div>

      <div class="step1-grid">
        <div class="panel">
          <label class="label" for="valenceInput">Total valence electrons (number)</label>
          <div class="row">
            <input class="input" id="valenceInput" inputmode="numeric" placeholder="Enter total…" />
            <button class="btn btn-primary" id="btnCheckValence" type="button">Check</button>
          </div>

          <div class="msg msg-neutral" id="valenceMsg">
            Enter the total, then click <b>Check</b>.
          </div>

          <div class="divider"></div>

          <label class="label" for="centralSelect">Central atom</label>
          <div class="row">
            <select class="select" id="centralSelect" disabled>
              <option value="">Select…</option>
            </select>
            <button class="btn btn-primary" id="btnLockCentral" type="button" disabled>Lock central atom</button>
            <button class="btn btn-secondary" id="btnReset" type="button">Reset build</button>
          </div>

          <div class="msg msg-neutral" id="centralMsg">Check the total electrons first.</div>
        </div>

        <div class="panel bank">
          <div class="bank-head">
            <div>
              <div class="label" style="margin:0">Electron bank</div>
              <div class="muted small">Bonds and lone pairs spend electrons.</div>
            </div>
            <div class="bank-badges">
              <div class="badge"><div class="small muted">Total</div><div id="bankTotal">—</div></div>
              <div class="badge"><div class="small muted">Remaining</div><div id="bankRemain">—</div></div>
            </div>
          </div>

          <div class="msg msg-warn" id="bankMsg">
            Electron bank will appear after you correctly confirm the total valence electrons.
          </div>

          <ul class="rules small">
            <li>Single bond costs <b>2 e⁻</b></li>
            <li>Double bond costs <b>4 e⁻</b></li>
            <li>Triple bond costs <b>6 e⁻</b></li>
            <li>Lone pair costs <b>2 e⁻</b></li>
          </ul>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-head-row">
        <div>
          <h2>Step 2: Build the model</h2>
          <div class="muted small">
            Drag <b>one bond</b> into the space <b>between atoms</b>. Drag <b>lone pairs</b> into the small dots around atoms.
            Click a placed item to remove it.
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-primary" id="btnCheckMol" type="button" disabled>Check molecule</button>
          <button class="btn btn-secondary" id="btnShowCorrect" type="button" disabled>Show correct model</button>
          <button class="btn btn-secondary" id="btnClear" type="button" disabled>Clear placements</button>
        </div>
      </div>

      <div class="build-grid">
        <div class="panel">
          <div class="panel-title">Model</div>

          <div class="msg msg-neutral" id="stageLocked">
            Confirm total electrons and <b>lock the central atom</b> to reveal the model.
          </div>

          <div class="stage" id="stageWrap" style="display:none;">
            <svg class="bond-svg" id="bondSvg" viewBox="0 0 1000 520" preserveAspectRatio="none"></svg>
          </div>

          <div class="msg msg-neutral" id="buildMsg">
            Build the skeleton first (bonds), then use lone pairs to complete outer shells.
          </div>

          <div class="feedback" id="feedback" style="display:none;"></div>
        </div>

        <div class="panel toolbox">
          <div class="panel-title">Toolbox</div>

          <div class="tool-list">
            <div class="tool" draggable="true" data-tool="bond1">
              <div class="tool-icon">—</div>
              <div>
                <div class="tool-name">Single bond</div>
                <div class="small muted">Costs 2 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="bond2">
              <div class="tool-icon">=</div>
              <div>
                <div class="tool-name">Double bond</div>
                <div class="small muted">Costs 4 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="bond3">
              <div class="tool-icon">≡</div>
              <div>
                <div class="tool-name">Triple bond</div>
                <div class="small muted">Costs 6 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="lp">
              <div class="tool-icon">••</div>
              <div>
                <div class="tool-name">Lone pair</div>
                <div class="small muted">Costs 2 e⁻</div>
              </div>
            </div>
          </div>

          <div class="hintbox">
            <div class="hint-title">Quick reminders</div>
            <ul class="hint small">
              <li>Hydrogen makes <b>1 bond</b> and has <b>0 lone pairs</b>.</li>
              <li>Halogens (F, Br) usually make <b>1 bond</b> and have <b>3 lone pairs</b>.</li>
              <li>Oxygen often has <b>2 bonds total</b> and <b>2 lone pairs</b>.</li>
              <li>Nitrogen often has <b>3 bonds total</b> and <b>1 lone pair</b>.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <button class="btn btn-secondary" id="btnNewMol" type="button">New molecule</button>
    </section>
  </main>

  <script src="lewis.js"></script>
</body>
</html>
