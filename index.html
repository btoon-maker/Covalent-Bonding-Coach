<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Covalent Bonding Coach</title>
  <link rel="stylesheet" href="lewis.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-mark" aria-hidden="true"></div>
      <div class="brand-text">
        <h1>Covalent Bonding Coach</h1>
        <p>Count the valence electrons, pick the central atom (if needed), then build the Lewis model.</p>
      </div>
    </div>
    <button id="newBtn" class="btn btn-secondary" type="button">New molecule</button>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="card-head">
        <div>
          <div class="eyebrow">MOLECULE</div>
          <div id="molName" class="mol-title">—</div>
          <div id="molPrompt" class="muted">Loading…</div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Step 1: Count electrons + choose the central atom</h2>
      <p class="muted">
        You must confirm the <b>total valence electrons</b> before building. (Example: O has 6, so O<sub>2</sub> has 12.)
      </p>

      <div class="step1-grid">
        <div class="panel">
          <label class="label">Total valence electrons (number)</label>
          <div class="row">
            <input id="veInput" class="input" type="number" inputmode="numeric" placeholder="Enter total…" />
            <button id="veCheckBtn" class="btn btn-primary" type="button">Check</button>
          </div>
          <div id="veMsg" class="msg msg-warn" style="display:none;"></div>

          <div class="divider"></div>

          <label class="label">Central atom</label>
          <div class="row">
            <select id="centralSelect" class="select" disabled>
              <option value="">Select…</option>
            </select>
            <button id="lockCentralBtn" class="btn btn-primary" type="button" disabled>Lock central atom</button>
            <button id="resetBuildBtn" class="btn btn-secondary" type="button">Reset build</button>
          </div>
          <div id="centralMsg" class="msg msg-neutral">Check the total electrons first.</div>
        </div>

        <div class="panel bank">
          <div class="bank-head">
            <div>
              <div class="label">Electron bank</div>
              <div class="muted small">
                Bonds and lone pairs spend electrons.
              </div>
            </div>
            <div class="bank-badges">
              <div class="badge">
                <span class="muted small">Total</span>
                <span id="bankTotal">—</span>
              </div>
              <div class="badge">
                <span class="muted small">Remaining</span>
                <span id="bankRemain">—</span>
              </div>
            </div>
          </div>

          <div class="bank-body">
            <div class="msg msg-warn" id="bankLockedMsg">
              Electron bank will appear after you correctly confirm the total valence electrons.
            </div>

            <ul class="rules">
              <li>Single bond costs <b>2 e⁻</b></li>
              <li>Double bond costs <b>4 e⁻</b></li>
              <li>Triple bond costs <b>6 e⁻</b></li>
              <li>Lone pair costs <b>2 e⁻</b></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <div class="card-head-row">
        <div>
          <h2>Step 2: Build the model</h2>
          <p class="muted">Drag a bond into the <b>space between atoms</b>. Drag lone pairs into slots around atoms. Click a filled slot/zone to remove it.</p>
        </div>
        <div class="actions">
          <button id="checkBtn" class="btn btn-primary" type="button" disabled>Check molecule</button>
          <button id="showBtn" class="btn btn-secondary" type="button" disabled>Show correct model</button>
          <button id="clearBtn" class="btn btn-secondary" type="button" disabled>Clear placements</button>
        </div>
      </div>

      <div class="build-grid">
        <div class="panel model-panel">
          <div class="panel-title">Model</div>

          <div id="modelStage" class="stage" aria-label="Lewis model building area">
            <!-- SVG bonds layer -->
            <svg id="bondSvg" class="bond-svg" viewBox="0 0 1000 520" preserveAspectRatio="none" aria-hidden="true"></svg>
            <!-- atoms + drop zones injected by JS -->
          </div>

          <div id="statusMsg" class="msg msg-neutral">
            Confirm total valence electrons and lock the central atom to begin.
          </div>
        </div>

        <div class="panel toolbox">
          <div class="panel-title">Toolbox</div>

          <div class="tool-list">
            <div class="tool" draggable="true" data-tool="bond1" aria-label="Single bond">
              <div class="tool-icon">—</div>
              <div>
                <div class="tool-name">Single bond</div>
                <div class="muted small">Costs 2 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="bond2" aria-label="Double bond">
              <div class="tool-icon">=</div>
              <div>
                <div class="tool-name">Double bond</div>
                <div class="muted small">Costs 4 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="bond3" aria-label="Triple bond">
              <div class="tool-icon">≡</div>
              <div>
                <div class="tool-name">Triple bond</div>
                <div class="muted small">Costs 6 e⁻</div>
              </div>
            </div>

            <div class="tool" draggable="true" data-tool="lp" aria-label="Lone pair">
              <div class="tool-icon">••</div>
              <div>
                <div class="tool-name">Lone pair</div>
                <div class="muted small">Costs 2 e⁻</div>
              </div>
            </div>
          </div>

          <div class="hintbox">
            <div class="hint-title">Quick reminders</div>
            <ul class="hint">
              <li>Hydrogen makes <b>1 bond</b> and has <b>0 lone pairs</b>.</li>
              <li>Halogens (F, Br) usually make <b>1 bond</b> and have <b>3 lone pairs</b>.</li>
              <li>Oxygen often has <b>2 bonds total</b> and <b>2 lone pairs</b>.</li>
              <li>Nitrogen often has <b>3 bonds total</b> and <b>1 lone pair</b>.</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="feedback" class="feedback" style="display:none;"></div>
    </section>
  </main>

  <script src="lewis.js"></script>
</body>
</html>
